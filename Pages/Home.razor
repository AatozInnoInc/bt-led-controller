@page "/"

@using Microsoft.AspNetCore.Components.Authorization
@using car_lister.Services

@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

<PageTitle>BT LED Guitar Dashboard - Guitar LED Control System</PageTitle>
<link href="css/home.css" rel="stylesheet" />

<div class="hero-section">
    <div class="hero-content">
        <div class="hero-text">
            <img src="images/bt-led-guitar-dashboard-favicon.png" alt="BT LED Guitar Dashboard Logo" class="hero-logo" />
            <h1>BT LED Guitar Dashboard</h1>
            <p class="hero-subtitle">Control your guitar's LED system with ease</p>
            <div class="hero-buttons">
                <button class="btn btn-primary btn-lg" @onclick="() => NavigationManager.NavigateTo('/addlisting')">
                    <i class="fas fa-plus"></i> Add New Configuration
                </button>
                <button class="btn btn-outline-primary btn-lg" @onclick="() => NavigationManager.NavigateTo('/login')">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </div>
        </div>
    </div>
</div>

<div class="features-section">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-guitar"></i>
                    </div>
                    <h3>LED Control</h3>
                    <p>Control your guitar's LED system with precision and ease.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Mobile Friendly</h3>
                    <p>Access your dashboard from any device, anywhere.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <h3>Cloud Sync</h3>
                    <p>Your configurations are safely stored in the cloud.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="about-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <img src="images/bt-led-guitar-dashboard-favicon.png" alt="BT LED Guitar Dashboard Logo" class="hero-logo" />
            </div>
            <div class="col-md-6">
                <h2>Why Choose BT LED Guitar Dashboard?</h2>
                <ul class="feature-list">
                    <li><i class="fas fa-check"></i> Easy LED configuration management</li>
                    <li><i class="fas fa-check"></i> Real-time control and monitoring</li>
                    <li><i class="fas fa-check"></i> Cross-platform compatibility</li>
                    <li><i class="fas fa-check"></i> Secure cloud storage</li>
                    <li><i class="fas fa-check"></i> User-friendly interface</li>
                </ul>
            </div>
        </div>
    </div>
</div>

@code {
    private string GetUserName()
    {
        try
        {
            var user = JSRuntime.InvokeAsync<IDictionary<string, object>>("firebaseAuth.getCurrentUser").Result;
            if (user != null && user.ContainsKey("displayName") && user["displayName"] != null)
            {
                return user["displayName"].ToString();
            }
            else if (user != null && user.ContainsKey("email"))
            {
                return user["email"].ToString().Split('@')[0];
            }
            return "User";
        }
        catch
        {
            return "User";
        }
    }

    private void NavigateToLogin()
    {
        NavigationManager.NavigateTo("/login");
    }

    private void NavigateToAddListing()
    {
        NavigationManager.NavigateTo("/add-listing");
    }
}
