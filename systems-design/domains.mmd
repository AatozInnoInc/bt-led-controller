%%{init: {
  "theme": "dark",
  "themeVariables": {
    "primaryColor": "#0d1117",
    "primaryTextColor": "#e6edf3",
    "primaryBorderColor": "#30363d",
    "lineColor": "#58a6ff",
    "secondaryColor": "#161b22",
    "actorBorder": "#58a6ff",
    "actorBkg": "#1f6feb",
    "actorTextColor": "#ffffff",
    "signalColor": "#58a6ff",
    "loopTextColor": "#e6edf3",
    "altBackground": "#161b22",
    "altTextColor": "#e6edf3",
    "sequenceNumberColor": "#7ee787"
  }
}}%%

graph TD
    subgraph Bluetooth Domain
        A[BluetoothService]
        B[DeviceRepository]
        C[BLECommandEncoder]
        D[ErrorEnvelope]
        F[ConfigurationModule]
    end
    
    A --> F
    F -->|Enter/Exit Config Mode| A
    
    subgraph Error Handling Module
        E[ErrorHandler]
    end
    
    D --> E
    
    subgraph React Native Testing Suite
        T1[Test Bluetooth Commands]
        T2[Test Bluetooth Error Handling]
        T3[Mock Bluetooth Operations]
        T4[Edge Cases & Envelope Decoding]
        T5[Test Config Mode Transitions]
    end
    
    T1 --> T3
    T2 --> T3
    T3 --> T4
    T4 --> T5
    
    N1["Manages entering and exiting the microcontroller's configuration mode"]
    N2["Tests for configuration mode transitions and related errors"]
    
    F -.-> N1
    T5 -.-> N2